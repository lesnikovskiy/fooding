var http = require('http');var path = require('path');var express = require('express');var app = module.exports = express();var engine = require('ejs-locals');var cradle = require('cradle');app.configure(function() {	// use ejs-locals for all ejs templates	app.engine('ejs', engine);	app.set('port', process.env.PORT || 3000);	app.set('views', __dirname + '/views');	app.set('view engine', 'ejs');		app.use(express.favicon());	app.use(express.logger('dev'));	app.use(express.bodyParser());	app.use(express.methodOverride());	app.use(app.router);	app.use(express.static(path.join(__dirname, '/public')));	app.use(express.errorHandler({		dumpExceptions: true, showStack: true	}));});app.get('/', function(req, res) {	res.render('index', {title: 'Fooding', message: 'Fooding'});});app.get('/products/list', function(req, res) {	res.render('products', {title: 'Fooding : Products', message: 'Products'});});app.get('/products/add', function(req, res) {	res.render('productsadd', {		title: 'New Product',		message: 'New Product',		legend: 'New Product',		saveText: 'Add Product'	});});app.post('/products/add', function(req, res) {	var product = {		name: req.body.name,		price: req.body.price	};		var options = //});app.get('/dishes/list', function(req, res) {	res.render('dishes', {title: 'Fooding : Dishes', message: 'Dishes', warn: 'to be updated'});});// apivar db = {	host: '127.0.0.1',	port: 5984,	login: 'admin',	password: 'Coffee!12'};function connect(dbname) {	return new(cradle.Connection)(db.host, db.port, {		auth: {			username: db.login,			password: db.password		}	}).database(dbname);}var headers = {	json: {		'Content-Type' : 'application/json'	},	html: {		'Content-Type': 'text/html'	},	javascript: {		'Content-Type': 'application/javascript'	}};app.get('/api/products/list/:limit/:skip', function(req, res) {	});app.get('/api/products/get/:id', function(req, res) {});app.post('/api/products/add', function(req, res) {	var db = connect('products');	db.save({		name: req.body.name,		price: req.body.price	}, function(err, response) {		if (err)			console.puts(err);		if (response) {			res.writeHead(200, headers.json);			res.end(JSON.parse(response));		}	});});app.post('/api/products/update', function(req, res) {});app.post('/api/products/delete', function(req, res) {});http.createServer(app).listen(app.get('port'), function() {	console.log("Express server listening on port " + app.get('port'));});