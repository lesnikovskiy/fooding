<% layout('layout') %>
<% script('/jquery-1.8.2.min.js') %>
<% script('/main.js') %>
<% stylesheet('/styles.css') %>

<h1><%= title %></h1>
<div class="dev-views">
	<form method="post" class="dev-create" action="/api/dev/products/all">
		<label>Create products/all view</label>
		<input type="submit" value="submit" />
		<div class="cl"></div>
	</form>
	<form method="post" class="dev-create" action="/api/dev/accounts/all">
		<label>Creates accounts/all view:</label>
		<input type="submit" value="submit" />
		<div class="cl"></div>
	</form>
</div>
<div id="modal-dialog">
	<div id="response-message"></div>
	<input type="button" id="closeButton" value="OK" />
</div>
<script type="text/javascript">
	function handleResponse(res) {
		if (res) {
			var msg = '';
			$.each(res, function(k, v) {
				msg += k + ': ' + v + '<br />';

				if (typeof this === object) {
					alert(this);
				}
			});

			$('#modal-dialog').center().fadeIn();
			$('#response-message').html(msg);
		}
	}

	$('.dev-create').submit(function() {
		$.ajax({
			type: $(this).attr('method'),
			url: $(this).attr('action'),
			cache: false,
			success: function(res) {
				handleResponse(res);
			}
		});
	
		return false;
	});

	$('#closeButton').click(function() {
		$('#modal-dialog').fadeOut();
	});
</script>

<% block('header', '') %>
<% block('footer', '') %>